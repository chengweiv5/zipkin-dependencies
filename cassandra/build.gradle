apply plugin: 'application'
apply plugin: 'com.github.johnrengelman.shadow'
mainClassName = 'org.openzipkin.dependencies.spark.cassandra.ZipkinDependenciesJob'

ext {
    versions = [
            cassandraConnector: '1.5.0-M2'
    ]
}
repositories {
    // For dependencies of zipkin-cassandra
    maven { url 'http://conjars.org/repo' }
}

dependencies {
    spark "org.apache.spark:spark-core_${scalaInterfaceVersion}:${commonVersions.spark}"
    compile "com.datastax.spark:spark-cassandra-connector_${scalaInterfaceVersion}:${versions.cassandraConnector}"
    compile "io.zipkin:zipkin-scrooge:${commonVersions.zipkin}"
    compile "io.zipkin:zipkin-cassandra:${commonVersions.zipkin}"
}

configurations.all {
    resolutionStrategy {
        eachDependency { DependencyResolveDetails details ->
            if (details.requested.group == 'com.typesafe.akka' && details.requested.name == "akka-slf4j_${scalaInterfaceVersion}") {
                details.useVersion commonVersions.akka
            }
            if (details.requested.group == 'com.typesafe.akka' && details.requested.name == "akka-remote_${scalaInterfaceVersion}") {
                details.useVersion commonVersions.akka
            }
        }
    }
}